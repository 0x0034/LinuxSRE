# PXE

## PXE 介绍

> Preboot excution eviroment

没有安装OS的主机，能够完成网络引导启动安装操作

## pxe工作流程

客户端网卡支持网络引导机制（网卡芯片需要支持）。如果主机已经有OS的话，网络引导调整为第一引导启动设备。在主机被唤醒之后，开始加载网络引导应用时，此网卡会通过在本地局域网当中广播一个RARP协议获得一个IP地址；获得IP地址以后，还是会从DHCP 服务器获的文件名称和文件服务器地址。此时，请求文件所在服务器主机通过tftp协议获取加载此文件，加载完之后在内存中展开。而后，基于此文件可以实现加载一个内核文件，此内核文件也一样通过tftp文件服务器获取内核文件。一个内核依赖于initrd虚根完成对于真实根所在设备的驱动的加载，这一切都给予文件服务器实现。加载完以后，这个内核文件通常是专用于为系统所设定的，因此，如果配置了网络属性的话，接着这个内核文件还是需要基于网络配合到内核的IP地址，基于网络把自己扮演某种协议的客户端去加载一个能够启动安装的包，在本地安装并启动一个应用程序。而此程序在什么地方呢？已经不在文件服务器上。他的使命已经完成了。安装CentOS或Redhat系列时它应该安装过程中安装大量的RPM包。这些RPM包彼此之间有依赖关系的。

网络引导安装依赖基础镜像仓库。所以，基于ftp，Http或NFS 协议服务提供的yum仓库。还要通过yum仓库加载安装程序以及安装程序启动完以后，很可能会读取kickstart文件，并根据kickstart文件的内容解决依赖关系以后，基于这个yum仓库完成后续的所有安装过程。

- CentOS系列安装OS的工作模式
  - DHCP (ip/netmask, gw, dns, filename, next-server)
  - tftp server(bootloader, kernel, initrd)
  - yum repository(ftp, http, https, nfs)
  
  - kickstart 文件

